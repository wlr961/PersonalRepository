<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
      <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Free Bootstrap Admin Template : Binary Admin</title>
	<!-- BOOTSTRAP STYLES-->
    <link href="assets/css/bootstrap.css" rel="stylesheet" />
     <!-- FONTAWESOME STYLES-->
    <link href="assets/css/font-awesome.css" rel="stylesheet" />
        <!-- CUSTOM STYLES-->
    <link href="assets/css/custom.css" rel="stylesheet" />
     <!-- GOOGLE FONTS-->
   <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
   <script src="scripts/boot.js" type="text/javascript"></script>
</head>
<body>
    <div id="wrapper">
        <nav class="navbar navbar-default navbar-cls-top " role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a id="degree" class="navbar-brand" href="index.html">Binary admin</a> 
            </div>
  <div style="color: white;
padding: 15px 50px 5px 50px;
float: right;
font-size: 16px;"> <text id="nowTime"></text>  &nbsp; <a href="login.html" class="btn btn-danger square-btn-adjust">Logout</a> </div>
        </nav>   
           <!-- /. NAV TOP  -->
                <nav class="navbar-default navbar-side" role="navigation">
            <div class="sidebar-collapse">
                <ul id="menu" class="nav" id="main-menu">
				<li class="text-center">
                    <img src="assets/img/find_user.png" class="user-image img-responsive"/>
					</li>									
                    <li>
                        <a  href="javascript:addTab1()"><i class="fa fa-dashboard fa-3x"></i> 个人资料</a>
                    </li>
                      <li>
                        <a  href="javascript:addTab2()"><i class="fa fa-desktop fa-3x"></i> 账户管理</a>
                    </li>
                    <li>
                        <a  href="javascript:addTab3()"><i class="fa fa-qrcode fa-3x"></i> 权限配置</a>
                    </li>
						   <li  >
                        <a  href="javascript:addTab4()"><i class="fa fa-bar-chart-o fa-3x"></i>最新动态管理</a>
                    </li>	
                      <li  >
                        <a  href="javascript:addTab6()"><i class="fa fa-table fa-3x"></i> 选题发布</a>
                    </li>
                    <li  >
                        <a  href="javascript:addTab7()"><i class="fa fa-edit fa-3x"></i> 选题 </a>
                    </li>				
					<li  >
                        <a   href="javascript:addTab8()"><i class="fa fa-bolt fa-3x"></i> 学生页面</a>
                    </li>	
					                   
                   <!--  多级菜单暂时不用 
                   <li>
                        <a href="#"><i class="fa fa-sitemap fa-3x"></i> Multi-Level Dropdown<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li>
                                <a href="#">Second Level Link</a>
                            </li>
                            <li>
                                <a href="#">Second Level Link</a>
                            </li>
                            <li>
                                <a href="#">Second Level Link<span class="fa arrow"></span></a>
                                <ul class="nav nav-third-level">
                                    <li>
                                        <a href="#">Third Level Link</a>
                                    </li>
                                    <li>
                                        <a href="#">Third Level Link</a>
                                    </li>
                                    <li>
                                        <a href="#">Third Level Link</a>
                                    </li>

                                </ul>
                               
                            </li>
                        </ul>
                      </li>  
                      -->
                  <li  >
                        <a class="active-menu"  href="javascript:addTab5()"><i class="fa fa-square-o fa-3x"></i> 消息管理</a>
                    </li>	
                </ul>
               
            </div>
            
        </nav>  
        <!-- /. NAV SIDE  -->
        <div id="page-wrapper" >
            <div id="page-inner">
                <div class="row">
                    <div class="col-md-12">
                     <h2>Blank Page</h2>   
                        <h5>Welcome Jhon Deo , Love to see you back. </h5>                      
                    </div>
                </div>
                 <!-- /. ROW  -->
                 <hr style="padding:0px;margin:2px;"/>

            <div showCollapseButton="false" style="border:0px;padding:0px;margin:0px;">
                <!--Tabs-->
                <div id="mainTabs" class="mini-tabs" activeIndex="2" style="width:100%;height:1300px;"      
                     plain="false" onactivechanged="onTabsActiveChanged" >
              <!--  <div title="Tab One" url="http://www.baidu.com" >        
                    </div>
                    <div title="Tab Two" url="../tabs/pages/page1.html" >        
                    </div>
                    <div title="弹出面板" url="../datagrid/datagrid.html" >        
                    </div>
                    <div title="弹出面板" url="../datagrid/fixedcolumns.html" >        
                    </div>
               -->
                </div>
            </div>
    </div>
             <!-- /. PAGE INNER  -->
            </div>
        
        </div>    
    <script src="assets/js/jquery-1.10.2.js"></script>    
    <script src="assets/js/bootstrap.min.js"></script>  
    <script src="assets/js/jquery.metisMenu.js"></script>   
    <script src="assets/js/custom.js"></script>
    <script type="text/javascript">
    var url=location.search;
    var Request=new Object();
    if(url.indexOf("?")!=-1)
    	{
    	var str=url.substr(1);
    	var strs=str.split("&");
    	for(var i=0;i<strs.length;i++)
    		{
    		  Request[strs[i].split("=")[0]]=unescape(strs[i].split("=")[1]);
    		}
    	} 
	 $.ajax({            	
         url: "/WlrBiBased/UsersAction",
         data:{username:Request["username"],userdegree:Request["userdegree"],flag:"selectInfoUser"},
         cache: false,
         success: function (text) {
        	 var jsonData = JSON.parse(text); 
        	 $("#title").text("Welcome "+jsonData.name+", Love to see you back.");   
        	 
         },
         error: function (jqXHR, textStatus, errorThrown) {
        	 mini.alert("failure","tip",function(){});
         }
     });
    $("#degree").text("Degree "+Request["userdegree"]);    
    $("#nowTime").text("Last access :"+new Date().toLocaleDateString()); 
       
    var uobj=document.getElementById("menu");
    var uli=uobj.getElementsByTagName("li");
    for (var i = 1; i <uli.length; i++) {
    	uli[i].style.display="none";  
    	}
   
    if(Request["userdegree"]=="管理员")
    {
    for (var i = 0; i <uli.length; i++) {
    	uli[i].style.display="";  
    	}
    }
    if(Request["userdegree"]=="学生")
    {
    	 $.ajax({            	
             url: "/WlrBiBased/DegreeAction",
             data:{flag:"selectStudentDegree"},
             cache: false,
             success: function (text) {
            	 var o = mini.decode(text);
            	 for (var i = 0; i <o.length; i++) {
            	    	uli[parseInt(o[i].id)].style.display="";  
            	    	}                  
             }
         });
    }
    if(Request["userdegree"]=="教师")
    {
    	 $.ajax({            	
             url: "/WlrBiBased/DegreeAction",
             data:{flag:"selectTeacherDegree"},
             cache: false,
             success: function (text) {
                 var o = mini.decode(text);
                 for (var i = 0; i <o.length; i++) {
         	    	uli[parseInt(o[i].id)].style.display="";  
         	    	}  
                                    
             }
         });
    }
    
    
    
    mini.parse();
    var tabs = mini.get("mainTabs");
    var index = 4;
    function addTab1() {
        //add tab
        var i = index++;        
        var tab = { title: "tab" + i, url: 'personalinfo.html?username='+escape(Request["username"])+'&usercode='+escape(Request["usercode"])+'&userdegree='+escape(Request["userdegree"]), showCloseButton: true };
        tab.ondestroy = function (e) {
            var tabs = e.sender;
            var iframe = tabs.getTabIFrameEl(e.tab);
            var pageReturnData = iframe.contentWindow.getData ? iframe.contentWindow.getData() : "";
            console.log(e.tab.removeAction + " : " + pageReturnData);            
        }
        tabs.addTab(tab);
        tabs.activeTab(tab);

    }  
    function addTab2() {
        //add tab
        var i = index++;        
        var tab = { title: "tab" + i, url: 'accountlist.html', showCloseButton: true };
        tab.ondestroy = function (e) {
            var tabs = e.sender;
            var iframe = tabs.getTabIFrameEl(e.tab);
            var pageReturnData = iframe.contentWindow.getData ? iframe.contentWindow.getData() : "";
            console.log(e.tab.removeAction + " : " + pageReturnData);            
        }
        tabs.addTab(tab);
        tabs.activeTab(tab);

    }
    
    function addTab3() {
        //add tab
        var i = index++;        
        var tab = { title: "tab" + i, url: 'degree.html', showCloseButton: true };
        tab.ondestroy = function (e) {
            var tabs = e.sender;
            var iframe = tabs.getTabIFrameEl(e.tab);
            var pageReturnData = iframe.contentWindow.getData ? iframe.contentWindow.getData() : "";
            console.log(e.tab.removeAction + " : " + pageReturnData);            
        }
        tabs.addTab(tab);
        tabs.activeTab(tab);

    }   
    
    function addTab4() {
        //add tab
        var i = index++;        
        var tab = { title: "tab" + i, url: 'newslist.html', showCloseButton: true };
        tab.ondestroy = function (e) {
            var tabs = e.sender;
            var iframe = tabs.getTabIFrameEl(e.tab);
            var pageReturnData = iframe.contentWindow.getData ? iframe.contentWindow.getData() : "";
            console.log(e.tab.removeAction + " : " + pageReturnData);            
        }
        tabs.addTab(tab);
        tabs.activeTab(tab);

    }  
    
    function addTab5() {
        //add tab
        var i = index++;        
        var tab = { title: "tab" + i, url: 'messagelist.html?username='+escape(Request["username"]), showCloseButton: true };
        tab.ondestroy = function (e) {
            var tabs = e.sender;
            var iframe = tabs.getTabIFrameEl(e.tab);
            var pageReturnData = iframe.contentWindow.getData ? iframe.contentWindow.getData() : "";
            console.log(e.tab.removeAction + " : " + pageReturnData);            
        }
        tabs.addTab(tab);
        tabs.activeTab(tab);

    }   
    
    function addTab6() {
        //add tab
        var i = index++;        
        var tab = { title: "tab" + i, url: 'issuesmanage.html?username='+escape(Request["username"]), showCloseButton: true };
        tab.ondestroy = function (e) {
            var tabs = e.sender;
            var iframe = tabs.getTabIFrameEl(e.tab);
            var pageReturnData = iframe.contentWindow.getData ? iframe.contentWindow.getData() : "";
            console.log(e.tab.removeAction + " : " + pageReturnData);            
        }
        tabs.addTab(tab);
        tabs.activeTab(tab);

    } 
    
    function addTab7() {
        //add tab
        var i = index++;        
        var tab = { title: "tab" + i, url: 'selectbibased.html?username='+escape(Request["username"])+'&usercode='+escape(Request["usercode"])+'&userdegree='+escape(Request["userdegree"]), showCloseButton: true };
        tab.ondestroy = function (e) {
            var tabs = e.sender;
            var iframe = tabs.getTabIFrameEl(e.tab);
            var pageReturnData = iframe.contentWindow.getData ? iframe.contentWindow.getData() : "";
            console.log(e.tab.removeAction + " : " + pageReturnData);            
        }
        tabs.addTab(tab);
        tabs.activeTab(tab);

    }  
    function addTab8() {
        //add tab
        var i = index++;        
        var tab = { title: "tab" + i, url: 'student.html?username='+escape(Request["username"])+'&usercode='+escape(Request["usercode"])+'&userdegree='+escape(Request["userdegree"]), showCloseButton: true };
        tab.ondestroy = function (e) {
            var tabs = e.sender;
            var iframe = tabs.getTabIFrameEl(e.tab);
            var pageReturnData = iframe.contentWindow.getData ? iframe.contentWindow.getData() : "";
            console.log(e.tab.removeAction + " : " + pageReturnData);            
        }
        tabs.addTab(tab);
        tabs.activeTab(tab);

    }
    </script>
    
   
</body>
</html>
